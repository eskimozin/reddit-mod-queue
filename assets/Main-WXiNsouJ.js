var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,j as a}from"./react-BHSQ6p-B.js";import{P as r}from"./prop-types-6BVzj02S.js";import{h as o}from"./moment-Dp8S5siu.js";import{T as n,A as i}from"./index-BeTvaUcC.js";import{L as c}from"./react-router-Dbda4_y8.js";import{H as l,L as d,q as u,z as p,l as m,y as f,P as h,E as x}from"./@headlessui-DzdKdTjB.js";import"./imask-BS2bIgfR.js";import{I as g}from"./react-imask-DiLtHfVP.js";import{H as b}from"./@hcaptcha-CFb8xOpG.js";import{F as j}from"./@heroicons-D4agDyqz.js";import{a as v}from"./axios-BKnib4Vv.js";import"./cookie-DpVX6GIM.js";import"./react-dom-xaiVBzj6.js";import"./scheduler-6ULW7vKx.js";import"./framer-motion--mamCbNx.js";import"./motion-dom-DPVl3rd1.js";import"./motion-utils-CzqutjiG.js";import"./@react-aria-DmNucNO9.js";import"./@react-stately--ykh_BKD.js";import"./use-sync-external-store-DNeTRN57.js";import"./@floating-ui-Azb9iFum.js";import"./@babel-Df3wz5eM.js";const y=s.createContext(null);function w({children:e}){const[t,r]=s.useState(""),[o,n]=s.useState(""),[i,c]=s.useState(null),[l,d]=s.useState(!0),[u,p]=s.useState(null),m={vUpdateTime:t,setVUpdateTime:r,latestRegister:o,setLatestRegister:n,postsPending:i,setPostsPending:c,isLoading:l,setIsLoading:d,error:u,setError:p};return a.jsx(y.Provider,{value:{...m},children:e})}function N({children:e}){return a.jsx("span",{className:"arial",children:e})}function C({time:e}){function t(e){const t=new Date(e),s=new Intl.DateTimeFormat("en-CA",{timeZone:"America/Sao_Paulo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),a=e=>{var t;return null==(t=s.find(t=>t.type===e))?void 0:t.value};return`${a("year")}-${a("month")}-${a("day")}T${a("hour")}:${a("minute")}:${a("second")}`}const r=o(t(new Date(e))),[n,i]=s.useState("pouco"),c=s.useCallback(()=>{const e=o(t(new Date)),s=e.diff(r,"seconds");let a=e.diff(r,"minutes"),n=e.diff(r,"hours"),c=e.diff(r,"days");n="localhost"===window.location.hostname?n:n-3,a="localhost"!==window.location.hostname&&a>=180?a-180:a,n="localhost"!==window.location.hostname&&a>=60&&n<4?Math.floor(a/60):n,i(n>24?`${c} ${c>1?"dias":"dia"}`:n>0?`${n} ${n>1?"horas":"hora"}`:a>0?`${a} ${a>1?"minutos":"minuto"}`:s>0?`${s} ${s>1?"segundos":"segundo"}`:"pouco")},[r]);return s.useEffect(()=>{c();const e=setInterval(c,1e3);return()=>clearInterval(e)},[c]),a.jsx(a.Fragment,{children:n})}function S({children:e}){return a.jsx("div",{className:"group grid max-w-sm h-[100%] gap-6 md:mx-auto lg:mx-auto lg:max-w-none lg:grid-cols-4",children:e})}function k({children:e,className:t=""}){const r=s.useRef(null),o=function(){const[e,t]=s.useState({x:0,y:0});return s.useEffect(()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),e}(),n=s.useRef({x:0,y:0}),i=s.useRef({w:0,h:0}),[c,l]=s.useState([]);s.useEffect(()=>{r.current&&l(Array.from(r.current.children).map(e=>e))},[]),s.useEffect(()=>(d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}),[c]),s.useEffect(()=>{u()},[o]);const d=()=>{r.current&&(i.current.w=r.current.offsetWidth,i.current.h=r.current.offsetHeight)},u=()=>{if(r.current){const e=r.current.getBoundingClientRect(),{w:t,h:s}=i.current,a=o.x-e.left,l=o.y-e.top;a<t&&a>0&&l<s&&l>0&&(n.current.x=a,n.current.y=l,c.forEach(t=>{const s=-(t.getBoundingClientRect().left-e.left)+n.current.x,a=-(t.getBoundingClientRect().top-e.top)+n.current.y;t.style.setProperty("--mouse-x",`${s}px`),t.style.setProperty("--mouse-y",`${a}px`)}))}};return a.jsx("div",{className:t,ref:r,children:e})}w.propTypes={children:r.node},N.propTypes={children:r.node},C.propTypes={time:r.string.isRequired},S.propTypes={children:r.node};const P="eskimozin",T="localhost"===window.location.hostname?"http://localhost:8001":"https://gabriers.up.railway.app",A="localhost"===window.location.hostname?"http://localhost:8010":"https://server-reddit-mod-queue-production.up.railway.app",I="https://github.com/eskimozin/reddit-mod-queue/issues/new",D="https://reddit.com/r/eskimozin",E={rel:"noopener noreferrer",target:"_blank",className:"focus-headless focus:text-white hover:text-white transition-colors"};function L({title:e,img:t,subtitle:s,description:r,action:o,btnLabel:n="Abrir no Reddit",link:i=D}){let d=a.jsx(k,{children:a.jsxs("div",{className:"relative overflow-hidden before:pointer-events-none before:absolute before:-left-40 before:-top-40 before:z-10 before:h-80 before:w-80 before:translate-x-[var(--mouse-x)] before:translate-y-[var(--mouse-y)] before:rounded-full before:border-slate-500 before:opacity-0 before:blur-3xl before:transition-opacity before:duration-500 after:pointer-events-none after:absolute after:-left-48 after:-top-48 after:z-30 after:h-64 after:w-64 after:translate-x-[var(--mouse-x)] after:translate-y-[var(--mouse-y)] after:rounded-full after:bg-slate-600 after:opacity-0 after:blur-3xl after:transition-opacity after:duration-500 after:hover:opacity-20 before:group-hover:opacity-100 bg-blackrounded-md text-white border border-white/10 bg-white/5 rounded-lg",children:[t?a.jsx("div",{className:"relative z-15",children:a.jsx("img",{src:t,className:"object-cover w-full h-[200px]",alt:e})}):"",a.jsxs("div",{className:"relative z-20 p-4 pt-5",children:[a.jsx("h2",{className:"block font-semibold text-xl line-clamp-2 text-ellipsis",children:e||"Título não retornado"}),a.jsx("p",{className:"text-gray-400 font-semibold mt-1 mb-0 line-clamp-2 text-ellipsis",children:s||"Usuário do post não retornado"}),a.jsx("p",{className:"mt-3 mb-4 pb-1",children:r}),a.jsxs(l,{className:"inline-flex items-center gap-1 rounded-[5px] bg-orange-600 border-orange-700 focus:bg-orange-700 hover:bg-orange-700 px-3 py-2 text-white/95  focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless mb-1 transition-colors",onClick:e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),o?o():window.open(i,"_blank","noreferrer noopener")},children:[n,a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16px",viewBox:"0 -960 960 960",width:"16px",fill:"#FFF",children:a.jsx("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"})})]})]})]})});return i?a.jsx(c,{to:i,...E,children:a.jsx(a.Fragment,{children:d})}):d}function q({children:e}){return a.jsx("div",{className:"bg-slate-800 border border-white/10 rounded-md p-3 mt-5 text-slate-400 items-center gap-2 inline-flex",children:e})}L.propTypes={title:r.string,subtitle:r.string,img:r.string,description:r.string,action:r.func,btnLabel:r.string},q.propTypes={children:r.node};const R=s.createContext(null);function $({children:e}){let{setStopAppInterval:t}=s.useContext(n);const[r,o]=s.useState(!1),[i,c]=s.useState(null),[l,d]=s.useState(Array(6).fill("")),[u,p]=s.useState(!1),[m,f]=s.useState(!1),h=s.useRef(null),x=s.useRef(null),[g,b]=s.useState(""),[j,v]=s.useState(""),[y,w]=s.useState(""),[N,C]=s.useState({}),[S,k]=s.useState(),[P,T]=s.useState(!1),A=s.useCallback(e=>{f(e),t(!1)},[]),I=s.useCallback(()=>{d(Array(6).fill(""))},[]),D=s.useCallback((e,t,s)=>{const a=[{e:"code",func:0===t.filter(e=>0===e.trim().length).length,ok:"",incomplete:"Preencha todos os números do código"}].filter(t=>t.e===e).at(0);return a.func?s(a.ok):s(a.incomplete),a.func},[]),E={isLoading:r,setIsLoading:o,error:i,setError:c,values:l,setValues:d,codeSend:u,setCodeSend:p,isOpen:m,setIsOpen:A,captchaRef1:h,captchaRef2:x,message:g,setMessage:b,action:j,setAction:v,actionTxt:y,setActionTxt:w,credentials:N,setCredentials:C,allOk:P,setAllOk:T,setFeedbackMessage:D,clearValues:I,idVerificationRequest:S,setIdVerificationRequest:k};return a.jsx(R.Provider,{value:{...E},children:e})}function F({children:e}){const{codeSend:t,setFeedbackMessage:r,values:o,setMessage:n}=s.useContext(R);return s.useEffect(()=>{t&&r("code",o,n)},[o]),a.jsx(a.Fragment,{children:e})}$.propTypes={children:r.node},F.propTypes={children:r.node};const O=({inputLength:e,values:t,setValues:r})=>{const o=s.useRef([]);return a.jsx("div",{className:"flex gap-1 justify-center mt-4 w-full",onPaste:t=>{t.preventDefault();const s=t.clipboardData.getData("text");if(!new RegExp(`^[0-9]{${e}}$`).test(s))return;const a=s.split("").slice(0,e);r(a),setTimeout(()=>{var t;null==(t=o.current[e-1])||t.focus()},0)},children:t.map((s,n)=>a.jsx(g,{mask:"0",value:s,onAccept:s=>((s,a)=>{if(!/^[0-9]?$/.test(s))return;const n=[...t];n[a]=s,r(n),s&&a<e-1&&setTimeout(()=>{var e;null==(e=o.current[a+1])||e.focus()},0)})(s,n),onKeyDown:s=>{return r=n,"Backspace"===(a=s).key&&!t[r]&&r>0&&(a.preventDefault(),null==(i=o.current[r-1])||i.focus()),"ArrowLeft"===a.key&&r>0&&(a.preventDefault(),null==(c=o.current[r-1])||c.focus()),void("ArrowRight"===a.key&&r<e-1&&(a.preventDefault(),null==(l=o.current[r+1])||l.focus()));var a,r,i,c,l},inputRef:e=>{o.current[n]=e},placeholder:"0",required:!0,className:"w-12 h-14 text-center focus-headless font-mono border rounded border-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-950/50 placeholder:text-white/25"},n))})},M=({children:e})=>a.jsx("span",{className:"arial",style:{fontSize:"inherit"},children:e});M.propTypes={children:r.node};const z=class e{static updateActiveLink(){const e=document.querySelectorAll("[href]");e&&e.forEach(e=>e.getAttribute("href")===window.location.pathname?e.classList.add("active"):e.classList.remove("active"))}static arraysEqual(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}static createArray(e,t){return t?Array.from({length:e},(e,s)=>s+t):Array.from({length:e},(e,t)=>t)}static formatTime(e,t){const s=new o(e).format(t);if("Invalid date"!==s)return s}static resumeInfoLine({modal:t,departure_location:s,destination_location:a,operation_days:r,time_first_start:o}){t=1===t?"ônibus":2===t?"metrô":"transporte público";let n=Array.isArray(r)?r.sort():[1,2,3,4];e.arraysEqual(n,[5,6,7])?n=e.createArray(7):e.arraysEqual(n,[5,6])?n=e.createArray(6):e.arraysEqual(n,[5])&&(n=e.createArray(5));const i=["segunda","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado","domingo"];let c,l=[];return o=["2020-01-01",o||"00:00:00"].join(" "),e.arraysEqual(e.createArray(7),n)?c="todos os dias da semana":e.arraysEqual(e.createArray(5),n)?(l.concat(i.toSpliced(5)),c="de segunda à sexta"):e.arraysEqual(e.createArray(6),n)?(l.concat(i.toSpliced(6)),c="de segunda à sábado"):(l.concat(n.map(e=>i.at(e))),c=l.join(", ")),`Linha de ${t&&s?t+" de "+s+" para "+a:"transporte público de Sabará-MG"}. Partidas ${c||"durante a semana (verifique o quadro de horários)"} a partir das ${e.formatTime(o,"HH:mm")||"00:00"}. As informações da linha são verificadas periodicamente. Verifique as informações na página, se algo estiver errado envie um reporte.`}static isSameDomain(e){if(e.startsWith("/"))return!0;try{return new URL(window.location.href).origin===new URL(e).origin}catch(t){return!1}}static formatString(e,t){const s=t.includes("#")&&!t.includes("?")?e.replace(/\D/g,""):e;let a="",r=0;for(let o=0;o<t.length;o++)"#"===t[o]||"?"===t[o]?r<s.length&&(a+=s[r],r++):a+=t[o];return a}static convertToSafeText(e){if(!e)return"";let t=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0100-\u1EFF]/g,"");return t=t.replace(/\s/g,"-"),t=t.replace(/[,.]/g,""),t=t.replace(/^\w]/g,""),t.replace(/-{2,}/g,"-")}static formatMoney(e){return Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e)}};t(z,"convertNumberToDay",e=>{const t=[[1,"Dias úteis"],[2,"Sábado"],[3,"Domingos e feriados"],[4,"Domingos e feriados"],[5,"Dias úteis - atípico"],[6,"Sábados - atípico"],[7,"Domingos e feriados - atípico"],[8,"Dias úteis - férias"],[9,"Sábados - férias"],[10,"Domingos - férias"],[11,"Dias úteis - PC1"],[12,"Sábados - PC2"],[13,"Domingos e feriados - PC2"],[14,"Quartas-feiras - PC1"],[15,"Quartas-feiras - PC2"],[16,"Quintas-feiras - PC1"],[17,"Quintas-feiras - PC2"],[18,"Sexta-feiras - PC1"],[19,"Sexta-feiras - PC2"],[20,"Segundas-feiras - PC1"],[21,"Segundas-feiras - PC2"],[22,"Terças-feiras - PC1"],[23,"Terças-feiras - PC2"]].find(t=>t[0]===parseInt(e,10));return t?t[1]:"Horário não mapeado"}),t(z,"renderText",e=>e.split?e.split(/(\/)/).map((e,t)=>"/"===e?a.jsx("span",{style:{fontSize:"inherit",fontFamily:"'Arial', sans-serif"},children:"/"},t):e):e),t(z,"processContents",e=>{const t=/<Link\s+to={(?:"|')([^"']+)(?:"|')}>(.*?)<\/Link>/g,s=[];let r,o=0,n=0;for(;null!==(r=t.exec(e));){const[t,i,c]=r,l=r.index,d=e.slice(o,l);d&&(s.push(...z.wrapTextInArialIfNeeded(d,n)),n++);const u=c.includes("/")?a.jsx(M,{children:c}):c;s.push(a.jsx("a",{href:i,children:u},"link-"+n++)),o=l+t.length}const i=e.slice(o);return i&&s.push(...z.wrapTextInArialIfNeeded(i,n)),s}),t(z,"wrapTextInArialIfNeeded",(e,t)=>{const s=[];if(!e.split)return e;const r=e.split(/(\s+)/);let o=0;return r.forEach(e=>{if(e.includes("/")){const[r,n]=e.split("/");s.push(a.jsxs("span",{children:[a.jsx("i",{className:"fst-normal fw-normal",children:r}),a.jsx(M,{children:"/"}),a.jsx("i",{className:"fst-normal fw-normal",children:n})]},`${t}-a-${o++}`))}else s.push(a.jsx("span",{children:e},`${t}-s-${o++}`))}),s});let _=z;function H(){const[e,t]=s.useState(""),[r,n]=s.useState(""),{isLoading:c,setIsLoading:m,values:f,setValues:h,isOpen:x,setIsOpen:g,captchaRef2:j,action:v,actionTxt:y,credentials:w,setAllOk:N,setFeedbackMessage:C,setIdVerificationRequest:S}=s.useContext(R);return s.useEffect(()=>{var e;null==(e=null==j?void 0:j.current)||e.resetCaptcha()},[]),a.jsx(d,{open:x,as:"div",className:"relative z-30 focus:outline-none",onClose:()=>g(!1),children:a.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto bg-black/70 backdrop-blur-md",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs(u,{transition:!0,className:"w-full max-w-md rounded-xl bg-white/10 p-6 backdrop-blur-2xl duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0",children:[a.jsxs(p,{as:"h3",className:"font-semibold text-[1.55rem]",children:["Confirmar ",["aprovar","reprovar"].includes(y.toLowerCase())?"aprovar"===y.toLowerCase()?"aprovação dos posts":"reprovação dos posts":"ação"]}),a.jsxs("p",{className:"mt-2 text-white/70",children:["Enviamos um código para o canal de logs do servidor no Discord. Informe abaixo e confirme. Se o código expirar, reinicie a solicitação. Ele é válido até ",w.datetimeCreate?_.renderText(o(w.datetimeCreate).format("DD/MM/YYYY [às] HH:mm:ss [UTC]Z")):"(validade do código não obtida)","."]}),a.jsxs("form",{action:"#",method:"POST",onSubmit:async t=>{if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),e){if(C("code",f,n))try{m(!0);const t=await fetch(`${A}/api/verify-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:w.id,action:v,code:f.join(""),datetimeCreate:w.datetimeCreate})}),s=await t.json();s.success?(n(""),N(!0),S(s.id),j.current.resetCaptcha()):(n(s.message||JSON.stringify(s)),j.current.resetCaptcha())}catch(s){n("Erro ao validar captcha.")}finally{m(!1)}}else n("Por favor, complete o captcha antes de enviar.")},children:[a.jsx(O,{inputLength:6,values:f,setValues:h}),a.jsx("div",{className:"mt-5 flex items-center justify-center",children:a.jsx(b,{sitekey:"e730ec6c-0428-47b4-8964-7d56667e76dc",onVerify:e=>t(e),ref:j})}),r&&a.jsx(i,{children:a.jsx("div",{className:"flex flex-wrap gap-2 items-center text-center p-3 bg-orange-500/5 border border-orange-300/25 text-orange-300 mt-4 rounded",children:a.jsx("p",{className:"text-balance",children:r})})}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center justify-center "+(c?"pointer-events-none opacity-55 cursor-not-allowed":""),children:[a.jsx(l,{className:"inline-flex items-center gap-2 rounded-md bg-gray-700 px-3 py-1.5 text-white focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless",onClick:e=>{e.stopPropagation(),g(!1)},children:"Cancelar"}),a.jsx(l,{type:"submit",className:"inline-flex items-center gap-2 rounded-md bg-orange-600 px-3 py-1.5 text-white focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless",children:"Confirmar"})]})]})]})})})})}function Y(){const[e,t]=s.useState(""),[r,o]=s.useState(""),{setCodeSend:n,isOpen:c,setIsOpen:m,captchaRef1:f,action:h,setCredentials:x,isLoading:g,setIsLoading:j}=s.useContext(R);return s.useEffect(()=>{var e;null==(e=null==f?void 0:f.current)||e.resetCaptcha()},[]),a.jsx(d,{open:c,as:"div",className:"relative z-30 focus:outline-none",onClose:()=>m(!1),children:a.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto bg-black/70 backdrop-blur-md",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs(u,{transition:!0,className:"w-full max-w-md rounded-xl bg-white/10 p-6 backdrop-blur-2xl duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0",children:[a.jsx(p,{as:"h3",className:"font-semibold text-[1.55rem]",children:"Preencha o Captcha"}),a.jsx("p",{className:"mt-2 text-white/70",children:"Após preencher o Captcha e confirmarmos que está tudo certo, enviaremos o código de verificação para o canal de logs Discord."}),a.jsxs("form",{action:"#",method:"POST",onSubmit:async s=>{if(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),e)try{j(!0);const s=await fetch(`${A}/api/new-action`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:(new Date).getTime(),action:h})}),a=await s.json();a.success?(x(a.credentials),o(""),n(!0),f.current.resetCaptcha()):(o(a.message||JSON.stringify(a)),f.current.resetCaptcha(),t(""))}catch(a){o("Erro ao validar captcha.")}finally{j(!1)}else o("Por favor, complete o captcha antes de enviar.")},children:[a.jsx("div",{className:"mt-5 flex items-center justify-center",children:a.jsx(b,{sitekey:"e730ec6c-0428-47b4-8964-7d56667e76dc",onVerify:e=>{t(e)},ref:f})}),r&&a.jsx(i,{children:a.jsx("div",{className:"flex flex-wrap gap-2 items-center text-center p-3 bg-orange-500/5 border border-orange-300/25 text-orange-300 mt-4 rounded",children:a.jsx("p",{className:"text-balance",children:r})})}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center justify-center "+(g?"pointer-events-none opacity-55 cursor-not-allowed":""),children:[a.jsx(l,{className:"inline-flex items-center gap-2 rounded-md bg-gray-700 px-3 py-1.5 text-white focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless",onClick:e=>{e.stopPropagation(),m(!1)},children:"Cancelar"}),a.jsx(l,{type:"submit",className:"inline-flex items-center gap-2 rounded-md bg-orange-600 px-3 py-1.5 text-white focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless",children:"Confirmar"})]})]})]})})})})}function V(){const[e,t]=s.useState("Em instantes a solicitação será concluída. Aguarde..."),[r,o]=s.useState(!1),{isOpen:c,setIsOpen:m,message:f,idVerificationRequest:h}=s.useContext(R);let{setStopAppInterval:x}=s.useContext(n);return s.useEffect(()=>{let e;return r?(x(!1),()=>{}):(e=setInterval(async()=>{if(!h)return;const e=await(async e=>{const t=await fetch(`${A}/api/verify-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});return await t.json()})(h);if(e.success)switch(parseInt(e.status)){case 2:t("Em instantes a solicitação será concluída. Aguarde...");break;case 3:t("Solicitação executada com sucesso"),o(!0);break;default:t("Status da execução não mapeado")}},1e3),()=>{x(!1),clearInterval(e)})},[r]),s.useEffect(()=>{!1===c&&o(!0)},[c]),a.jsx(d,{open:c,as:"div",className:"relative z-30 focus:outline-none",onClose:()=>m(!1),children:a.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto bg-black/70 backdrop-blur-md",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsxs(u,{transition:!0,className:"w-full max-w-md rounded-xl bg-white/10 p-6 backdrop-blur-2xl duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0",children:[a.jsx(p,{as:"h3",className:"font-semibold text-[1.55rem]",children:"Solicitação enviada"}),a.jsx("p",{className:"mt-4 my-6 text-white/70",children:e}),f&&a.jsx(i,{children:a.jsx("div",{className:"flex flex-wrap gap-2 items-center text-center p-3 bg-orange-500/5 border border-orange-300/25 text-orange-300 mt-4 rounded",children:a.jsx("p",{className:"text-balance",children:f})})}),a.jsx("div",{className:"mt-4 flex flex-wrap gap-2 items-center justify-center",children:a.jsx(l,{className:"inline-flex items-center gap-2 rounded-md bg-gray-700 px-3 py-1.5 text-white focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-600 data-open:bg-gray-700 focus-headless",onClick:e=>{e.stopPropagation(),m(!1)},children:"Fechar"})})]})})})})}function B(){let{codeSend:e,setIsOpen:t,setAction:r,setActionTxt:o,allOk:i,setCodeSend:c,setAllOk:l,clearValues:d,setMessage:u}=s.useContext(R),{setStopAppInterval:p}=s.useContext(n);return a.jsxs("div",{children:[!e&&!i&&a.jsx(Y,{}),e&&!i&&a.jsx(H,{}),e&&i&&a.jsx(V,{}),a.jsxs(m,{children:[a.jsxs(f,{className:"mt-8 inline-flex items-center focus-headless gap-2 rounded bg-gray-800 px-3 py-2  text-white  focus:not-data-focus:outline-none data-focus:outline data-focus:outline-white data-hover:bg-gray-700 data-open:bg-gray-700",children:["Moderar todos de uma vez",a.jsx(j,{className:"size-4 fill-white/60"})]}),a.jsx(h,{transition:!0,anchor:"bottom end",className:"w-52 mt-1 origin-top-right rounded border border-white/20 bg-slate-900 p-1 text-white transition duration-100 ease-out [--anchor-gap:--spacing(1)] focus:outline-none data-closed:scale-95 data-closed:opacity-0",children:[[1,"Aprovar",()=>{}],[2,"Reprovar",()=>{}]].map((e,s)=>a.jsx(x,{onClick:s=>{s.preventDefault(),l(!1),c(!1),t(!0),r(e[0]),o(e[1]),d(),u(""),p(!0)},children:a.jsx("button",{className:"focus-headless group flex w-full items-center gap-2 rounded px-3 py-1.5 hover:bg-white/10 data-focus:bg-white/10 focus:bg-white/10",children:e[1]})},s))})]})]})}function U(){return a.jsxs($,{children:[a.jsx(F,{}),a.jsx(B,{})]})}const Z=()=>{const{vUpdateTime:e,latestRegister:t}=s.useContext(y);return a.jsxs("hgroup",{className:"flex items-center gap-4 mb-8 flex-wrap",children:[a.jsx("img",{src:"https://styles.redditmedia.com/t5_djonfq/styles/communityIcon_so6opouwbkwe1.jpeg?format=pjpg&s=87d36ec6c490962999a51fdc8b64bf180892131a",alt:"Foto de perfil do r/eskimozin",className:"rounded-full w-[50px] h-[50px] object-cover"}),a.jsxs("div",{className:"block",children:[a.jsxs("h1",{className:"text-balance font-bold text-3xl",children:["Fila de moderação do ",a.jsxs("span",{className:"text-orange-600",children:["r",a.jsx(N,{children:"/"}),P]})]}),a.jsxs("p",{className:"mb-0 mt-1 text-gray-400 text-balance max-w-[600px]",children:["Atualizado há ",e?a.jsx(C,{time:e}):"pouco",". O último post entrou na fila de moderação há ",t?a.jsx(C,{time:t}):"pouco",". A verificação da fila é feita a cada 5 minutos."]})]})]})},J=()=>{const{isLoading:e,postsPending:t,error:r}=s.useContext(y);return a.jsx(S,{children:a.jsx(i,{children:e&&!t?a.jsx(L,{title:"Carregando...",subtitle:"Conectando à API, aguarde",description:"Geralmente isso é rápido mas pode ser que demore um pouco.",link:D,btnLabel:"Ir pro subreddit",actions:e=>{e.preventDefault(),e.stopPropagation(),window.open(D,"_blank","noreferrer noopener")}}):t?t.map((e,t)=>{const a={title:e.post_title,subtitle:e.post_author_name,description:"",img:e.post_img_url,link:e.reddit_link,action:()=>{window.open(e.reddit_link,"_blank","noreferrer noopener")}};return s.createElement(L,{...a,key:t})}):r?a.jsx(L,{title:"Ocorreu um erro: "+r,subtitle:"Algo não saiu como deveria...",description:"",link:I,actions:e=>{e.preventDefault(),e.stopPropagation(),window.open(I,"_blank","noreferrer noopener")},btnLabel:"Reportar"}):a.jsx(L,{title:"Não há nada por aqui...",subtitle:"Tudo certo!",description:"Sem posts para a moderação avaliar. Pegue uma bebida e aguarde.",btnLabel:"Ir pro subreddit",actions:e=>{e.preventDefault(),e.stopPropagation(),window.open(D,"_blank","noreferrer noopener")}})})})},Q=()=>{const{postsPending:e}=s.useContext(y);return a.jsx(a.Fragment,{children:e&&e.length>1&&a.jsx(U,{})})},G=()=>{const{postsPending:e}=s.useContext(y);return a.jsxs(a.Fragment,{children:[e&&e.length>=10&&a.jsx(i,{children:a.jsxs(q,{children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#94A3B8",className:"bi bi-exclamation-circle",viewBox:"0 0 16 16",children:[a.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),a.jsx("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})]}),a.jsx("span",{children:"Listamos apenas os 10 últimos posts pendentes de moderação."})]})}),a.jsx(q,{children:a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx("p",{children:"Encontrou um erro?"})," ",a.jsx("a",{href:I,...E,children:a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx("span",{className:"text-white",children:"Avisa pra gente!"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16px",viewBox:"0 -960 960 960",width:"16px",fill:"#FFF",children:a.jsx("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"})})]})})]})})]})};function W(){const{setVUpdateTime:e,setLatestRegister:t,setPostsPending:a,setIsLoading:r,setError:n}=s.useContext(y);return s.useEffect(()=>{try{v.post(`${T}/api/get-latest-register/`).then(s=>{const{data:a}=s;if(a&&a.rows[0][0].datetime_register){const e=a.rows[0][0].datetime_register;t(e)}e(o().format("YYYY-MM-DDTHH:mm:ssZ"))})}catch(s){alert("Um erro ocorreu! "+s.message)}},[t,e]),s.useEffect(()=>{try{v.post(`${T}/api/get-unmoderates-posts/`).then(t=>{const{data:s}=t;s&&s.rows[0].length>0&&a(s.rows[0]),e(o().format("YYYY-MM-DDTHH:mm:ssZ"))}).catch(e=>{n(e.message)}).finally(()=>{r(!1)})}catch(t){}},[n,r,a,e]),null}function K(){const e={fontWeight:300,fontFamily:'"Inter Tight", "Inter", sans-serif',letterSpacing:.2},[t,r]=s.useState({datetimeCreate:null});return s.useEffect(()=>{fetch("./register.build.json").then(e=>e.json()).then(e=>{r({...e})})},[]),a.jsx("div",{className:"container text-center pt-8 lg:pt-10 mt-8 lg:mt-10 border-t border-slate-800",children:a.jsxs("div",{className:"text-gray-400",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-decoration-none fw-light",style:{...e,color:"inherit"},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-c-circle",viewBox:"0 0 16 16",children:a.jsx("path",{d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.146 4.992c-1.212 0-1.927.92-1.927 2.502v1.06c0 1.571.703 2.462 1.927 2.462.979 0 1.641-.586 1.729-1.418h1.295v.093c-.1 1.448-1.354 2.467-3.03 2.467-2.091 0-3.269-1.336-3.269-3.603V7.482c0-2.261 1.201-3.638 3.27-3.638 1.681 0 2.935 1.054 3.029 2.572v.088H9.875c-.088-.879-.768-1.512-1.729-1.512"})}),a.jsxs("span",{children:[o().utc().format("YYYY")," - "]}),a.jsxs("span",{children:["Fila de moderação do r",a.jsx(N,{children:"/"}),P]})]}),a.jsxs("a",{href:"https://github.com/gabriersdev",className:"text-decoration-none fw-light focus-headless",style:{...e,color:"inherit"},children:["Feito com 💖 pelo ","Gabriel","."]}),t.datetimeCreate&&a.jsxs("span",{className:"block text-[13px] mt-2 text-white",children:["Versão de build: ",_.renderText(o(t.datetimeCreate).utc(!0).format("HH[h]mm[m] DD/MM/YYYY [UTC-03:00]"))]})]})})}function X(){return a.jsxs(w,{children:[a.jsx(W,{}),a.jsx("div",{className:"flex align-center justify-center",children:a.jsxs("div",{className:"container mx-3 my-8 lg:my-10 min-h-[90vh] flex justify-between flex-col",children:[a.jsxs("main",{children:[a.jsxs(i,{children:[a.jsx(Z,{}),a.jsx(J,{})]}),a.jsx(Q,{}),a.jsx(G,{})]}),a.jsx(K,{})]})})]})}export{X as default};
