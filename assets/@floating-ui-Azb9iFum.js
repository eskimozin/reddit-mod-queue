import{r as t,t as e}from"./react-BHSQ6p-B.js";import{r as n}from"./react-dom-xaiVBzj6.js";function o(){return"undefined"!=typeof window}function r(t){return c(t)?(t.nodeName||"").toLowerCase():"#document"}function i(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function l(t){var e;return null==(e=(c(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function c(t){return!!o()&&(t instanceof Node||t instanceof i(t).Node)}function s(t){return!!o()&&(t instanceof Element||t instanceof i(t).Element)}function a(t){return!!o()&&(t instanceof HTMLElement||t instanceof i(t).HTMLElement)}function u(t){return!(!o()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof i(t).ShadowRoot)}function f(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=y(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function d(t){return["table","td","th"].includes(r(t))}function m(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch(n){return!1}})}function p(t){const e=g(),n=s(t)?y(t):t;return["transform","translate","scale","rotate","perspective"].some(t=>!!n[t]&&"none"!==n[t])||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(t=>(n.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(n.contain||"").includes(t))}function g(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function h(t){return["html","body","#document"].includes(r(t))}function y(t){return i(t).getComputedStyle(t)}function w(t){return s(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function v(t){if("html"===r(t))return t;const e=t.assignedSlot||t.parentNode||u(t)&&t.host||l(t);return u(e)?e.host:e}function x(t){const e=v(t);return h(e)?t.ownerDocument?t.ownerDocument.body:t.body:a(e)&&f(e)?e:x(e)}function b(t,e,n){var o;void 0===e&&(e=[]),void 0===n&&(n=!0);const r=x(t),l=r===(null==(o=t.ownerDocument)?void 0:o.body),c=i(r);if(l){const t=R(c);return e.concat(c,c.visualViewport||[],f(r)?r:[],t&&n?b(t):[])}return e.concat(r,b(r,[],n))}function R(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const T=Math.min,C=Math.max,E=Math.round,L=Math.floor,S=t=>({x:t,y:t}),A={left:"right",right:"left",bottom:"top",top:"bottom"},M={start:"end",end:"start"};function P(t,e,n){return C(t,T(e,n))}function D(t,e){return"function"==typeof t?t(e):t}function k(t){return t.split("-")[0]}function H(t){return t.split("-")[1]}function O(t){return"x"===t?"y":"x"}function F(t){return"y"===t?"height":"width"}function B(t){return["top","bottom"].includes(k(t))?"y":"x"}function W(t){return O(B(t))}function I(t){return t.replace(/start|end/g,t=>M[t])}function V(t){return t.replace(/left|right|bottom|top/g,t=>A[t])}function j(t){const{x:e,y:n,width:o,height:r}=t;return{width:o,height:r,top:n,left:e,right:e+o,bottom:n+r,x:e,y:n}}function z(t,e,n){let{reference:o,floating:r}=t;const i=B(e),l=W(e),c=F(l),s=k(e),a="y"===i,u=o.x+o.width/2-r.width/2,f=o.y+o.height/2-r.height/2,d=o[c]/2-r[c]/2;let m;switch(s){case"top":m={x:u,y:o.y-r.height};break;case"bottom":m={x:u,y:o.y+o.height};break;case"right":m={x:o.x+o.width,y:f};break;case"left":m={x:o.x-r.width,y:f};break;default:m={x:o.x,y:o.y}}switch(H(e)){case"start":m[l]-=d*(n&&a?-1:1);break;case"end":m[l]+=d*(n&&a?-1:1)}return m}async function N(t,e){var n;void 0===e&&(e={});const{x:o,y:r,platform:i,rects:l,elements:c,strategy:s}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=D(e,t),p="number"!=typeof(b=m)?(R=b,{top:0,right:0,bottom:0,left:0,...R}):{top:b,right:b,bottom:b,left:b},g=c[d?"floating"===f?"reference":"floating":f],h=j(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(c.floating)),boundary:a,rootBoundary:u,strategy:s})),y="floating"===f?{x:o,y:r,width:l.floating.width,height:l.floating.height}:l.reference,w=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c.floating)),v=await(null==i.isElement?void 0:i.isElement(w))&&await(null==i.getScale?void 0:i.getScale(w))||{x:1,y:1},x=j(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:w,strategy:s}):y);var b,R;return{top:(h.top-x.top+p.top)/v.y,bottom:(x.bottom-h.bottom+p.bottom)/v.y,left:(h.left-x.left+p.left)/v.x,right:(x.right-h.right+p.right)/v.x}}function q(t){const e=y(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=a(t),i=r?t.offsetWidth:n,l=r?t.offsetHeight:o,c=E(n)!==i||E(o)!==l;return c&&(n=i,o=l),{width:n,height:o,$:c}}function $(t){return s(t)?t:t.contextElement}function Y(t){const e=$(t);if(!a(e))return S(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=q(e);let l=(i?E(n.width):n.width)/o,c=(i?E(n.height):n.height)/r;return l&&Number.isFinite(l)||(l=1),c&&Number.isFinite(c)||(c=1),{x:l,y:c}}const _=S(0);function K(t){const e=i(t);return g()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:_}function X(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1);const r=t.getBoundingClientRect(),l=$(t);let c=S(1);e&&(o?s(o)&&(c=Y(o)):c=Y(t));const a=(u=l,void 0===(f=n)&&(f=!1),!(d=o)||f&&d!==i(u)||!f?S(0):K(l));var u,f,d;let m=(r.left+a.x)/c.x,p=(r.top+a.y)/c.y,g=r.width/c.x,h=r.height/c.y;if(l){const t=i(l),e=o&&s(o)?i(o):o;let n=t,r=R(n);for(;r&&o&&e!==n;){const t=Y(r),e=r.getBoundingClientRect(),o=y(r),l=e.left+(r.clientLeft+parseFloat(o.paddingLeft))*t.x,c=e.top+(r.clientTop+parseFloat(o.paddingTop))*t.y;m*=t.x,p*=t.y,g*=t.x,h*=t.y,m+=l,p+=c,n=i(r),r=R(n)}}return j({width:g,height:h,x:m,y:p})}function G(t,e){const n=w(t).scrollLeft;return e?e.left+n:X(l(t)).left+n}function J(t,e,n){void 0===n&&(n=!1);const o=t.getBoundingClientRect();return{x:o.left+e.scrollLeft-(n?0:G(t,o)),y:o.top+e.scrollTop}}function Q(t,e,n){let o;if("viewport"===e)o=function(t,e){const n=i(t),o=l(t),r=n.visualViewport;let c=o.clientWidth,s=o.clientHeight,a=0,u=0;if(r){c=r.width,s=r.height;const t=g();(!t||t&&"fixed"===e)&&(a=r.offsetLeft,u=r.offsetTop)}return{width:c,height:s,x:a,y:u}}(t,n);else if("document"===e)o=function(t){const e=l(t),n=w(t),o=t.ownerDocument.body,r=C(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),i=C(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let c=-n.scrollLeft+G(t);const s=-n.scrollTop;return"rtl"===y(o).direction&&(c+=C(e.clientWidth,o.clientWidth)-r),{width:r,height:i,x:c,y:s}}(l(t));else if(s(e))o=function(t,e){const n=X(t,!0,"fixed"===e),o=n.top+t.clientTop,r=n.left+t.clientLeft,i=a(t)?Y(t):S(1);return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:r*i.x,y:o*i.y}}(e,n);else{const n=K(t);o={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return j(o)}function U(t,e){const n=v(t);return!(n===e||!s(n)||h(n))&&("fixed"===y(n).position||U(n,e))}function Z(t,e,n){const o=a(e),i=l(e),c="fixed"===n,s=X(t,!0,c,e);let u={scrollLeft:0,scrollTop:0};const d=S(0);function m(){d.x=G(i)}if(o||!o&&!c)if(("body"!==r(e)||f(i))&&(u=w(e)),o){const t=X(e,!0,c,e);d.x=t.x+e.clientLeft,d.y=t.y+e.clientTop}else i&&m();c&&!o&&i&&m();const p=!i||o||c?S(0):J(i,u);return{x:s.left+u.scrollLeft-d.x-p.x,y:s.top+u.scrollTop-d.y-p.y,width:s.width,height:s.height}}function tt(t){return"static"===y(t).position}function et(t,e){if(!a(t)||"fixed"===y(t).position)return null;if(e)return e(t);let n=t.offsetParent;return l(t)===n&&(n=n.ownerDocument.body),n}function nt(t,e){const n=i(t);if(m(t))return n;if(!a(t)){let e=v(t);for(;e&&!h(e);){if(s(e)&&!tt(e))return e;e=v(e)}return n}let o=et(t,e);for(;o&&d(o)&&tt(o);)o=et(o,e);return o&&h(o)&&tt(o)&&!p(o)?n:o||function(t){let e=v(t);for(;a(e)&&!h(e);){if(p(e))return e;if(m(e))return null;e=v(e)}return null}(t)||n}const ot={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:o,strategy:i}=t;const c="fixed"===i,s=l(o),u=!!e&&m(e.floating);if(o===s||u&&c)return n;let d={scrollLeft:0,scrollTop:0},p=S(1);const g=S(0),h=a(o);if((h||!h&&!c)&&(("body"!==r(o)||f(s))&&(d=w(o)),a(o))){const t=X(o);p=Y(o),g.x=t.x+o.clientLeft,g.y=t.y+o.clientTop}const y=!s||h||c?S(0):J(s,d,!0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-d.scrollLeft*p.x+g.x+y.x,y:n.y*p.y-d.scrollTop*p.y+g.y+y.y}},getDocumentElement:l,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const l=[..."clippingAncestors"===n?m(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let o=b(t,[],!1).filter(t=>s(t)&&"body"!==r(t)),i=null;const l="fixed"===y(t).position;let c=l?v(t):t;for(;s(c)&&!h(c);){const e=y(c),n=p(c);n||"fixed"!==e.position||(i=null),(l?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||f(c)&&!n&&U(t,c))?o=o.filter(t=>t!==c):i=e,c=v(c)}return e.set(t,o),o}(e,this._c):[].concat(n),o],c=l[0],a=l.reduce((t,n)=>{const o=Q(e,n,i);return t.top=C(o.top,t.top),t.right=T(o.right,t.right),t.bottom=T(o.bottom,t.bottom),t.left=C(o.left,t.left),t},Q(e,c,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:nt,getElementRects:async function(t){const e=this.getOffsetParent||nt,n=this.getDimensions,o=await n(t.floating);return{reference:Z(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=q(t);return{width:e,height:n}},getScale:Y,isElement:s,isRTL:function(t){return"rtl"===y(t).direction}};function rt(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function it(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:a=!1}=o,u=$(t),f=r||i?[...u?b(u):[],...b(e)]:[];f.forEach(t=>{r&&t.addEventListener("scroll",n,{passive:!0}),i&&t.addEventListener("resize",n)});const d=u&&s?function(t,e){let n,o=null;const r=l(t);function i(){var t;clearTimeout(n),null==(t=o)||t.disconnect(),o=null}return function l(c,s){void 0===c&&(c=!1),void 0===s&&(s=1),i();const a=t.getBoundingClientRect(),{left:u,top:f,width:d,height:m}=a;if(c||e(),!d||!m)return;const p={rootMargin:-L(f)+"px "+-L(r.clientWidth-(u+d))+"px "+-L(r.clientHeight-(f+m))+"px "+-L(u)+"px",threshold:C(0,T(1,s))||1};let g=!0;function h(e){const o=e[0].intersectionRatio;if(o!==s){if(!g)return l();o?l(!1,o):n=setTimeout(()=>{l(!1,1e-7)},1e3)}1!==o||rt(a,t.getBoundingClientRect())||l(),g=!1}try{o=new IntersectionObserver(h,{...p,root:r.ownerDocument})}catch(y){o=new IntersectionObserver(h,p)}o.observe(t)}(!0),i}(u,n):null;let m,p=-1,g=null;c&&(g=new ResizeObserver(t=>{let[o]=t;o&&o.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var t;null==(t=g)||t.observe(e)})),n()}),u&&!a&&g.observe(u),g.observe(e));let h=a?X(t):null;return a&&function e(){const o=X(t);h&&!rt(h,o)&&n(),h=o,m=requestAnimationFrame(e)}(),n(),()=>{var t;f.forEach(t=>{r&&t.removeEventListener("scroll",n),i&&t.removeEventListener("resize",n)}),null==d||d(),null==(t=g)||t.disconnect(),g=null,a&&cancelAnimationFrame(m)}}const lt=N,ct=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:r,y:i,placement:l,middlewareData:c}=e,s=await async function(t,e){const{placement:n,platform:o,elements:r}=t,i=await(null==o.isRTL?void 0:o.isRTL(r.floating)),l=k(n),c=H(n),s="y"===B(n),a=["left","top"].includes(l)?-1:1,u=i&&s?-1:1,f=D(e,t);let{mainAxis:d,crossAxis:m,alignmentAxis:p}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&"number"==typeof p&&(m="end"===c?-1*p:p),s?{x:m*u,y:d*a}:{x:d*a,y:m*u}}(e,t);return l===(null==(n=c.offset)?void 0:n.placement)&&null!=(o=c.arrow)&&o.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:l}}}}},st=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:r}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...s}=D(t,e),a={x:n,y:o},u=await N(e,s),f=B(k(r)),d=O(f);let m=a[d],p=a[f];if(i){const t="y"===d?"bottom":"right";m=P(m+u["y"===d?"top":"left"],m,m-u[t])}if(l){const t="y"===f?"bottom":"right";p=P(p+u["y"===f?"top":"left"],p,p-u[t])}const g=c.fn({...e,[d]:m,[f]:p});return{...g,data:{x:g.x-n,y:g.y-o,enabled:{[d]:i,[f]:l}}}}}},at=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:r,middlewareData:i,rects:l,initialPlacement:c,platform:s,elements:a}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...h}=D(t,e);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const y=k(r),w=B(c),v=k(c)===c,x=await(null==s.isRTL?void 0:s.isRTL(a.floating)),b=d||(v||!g?[V(c)]:function(t){const e=V(t);return[I(t),e,I(e)]}(c)),R="none"!==p;!d&&R&&b.push(...function(t,e,n,o){const r=H(t);let i=function(t,e,n){const o=["left","right"],r=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:o:e?o:r;case"left":case"right":return e?i:l;default:return[]}}(k(t),"start"===n,o);return r&&(i=i.map(t=>t+"-"+r),e&&(i=i.concat(i.map(I)))),i}(c,g,p,x));const T=[c,...b],C=await N(e,h),E=[];let L=(null==(o=i.flip)?void 0:o.overflows)||[];if(u&&E.push(C[y]),f){const t=function(t,e,n){void 0===n&&(n=!1);const o=H(t),r=W(t),i=F(r);let l="x"===r?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=V(l)),[l,V(l)]}(r,l,x);E.push(C[t[0]],C[t[1]])}if(L=[...L,{placement:r,overflows:E}],!E.every(t=>t<=0)){var S,A;const t=((null==(S=i.flip)?void 0:S.index)||0)+1,e=T[t];if(e&&("alignment"!==f||w===B(e)||L.every(t=>t.overflows[0]>0&&B(t.placement)===w)))return{data:{index:t,overflows:L},reset:{placement:e}};let n=null==(A=L.filter(t=>t.overflows[0]<=0).sort((t,e)=>t.overflows[1]-e.overflows[1])[0])?void 0:A.placement;if(!n)switch(m){case"bestFit":{var M;const t=null==(M=L.filter(t=>{if(R){const e=B(t.placement);return e===w||"y"===e}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:M[0];t&&(n=t);break}case"initialPlacement":n=c}if(r!==n)return{reset:{placement:n}}}return{}}}},ut=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:r,rects:i,platform:l,elements:c}=e,{apply:s=()=>{},...a}=D(t,e),u=await N(e,a),f=k(r),d=H(r),m="y"===B(r),{width:p,height:g}=i.floating;let h,y;"top"===f||"bottom"===f?(h=f,y=d===(await(null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(y=f,h="end"===d?"top":"bottom");const w=g-u.top-u.bottom,v=p-u.left-u.right,x=T(g-u[h],w),b=T(p-u[y],v),R=!e.middlewareData.shift;let E=x,L=b;if(null!=(n=e.middlewareData.shift)&&n.enabled.x&&(L=v),null!=(o=e.middlewareData.shift)&&o.enabled.y&&(E=w),R&&!d){const t=C(u.left,0),e=C(u.right,0),n=C(u.top,0),o=C(u.bottom,0);m?L=p-2*(0!==t||0!==e?t+e:C(u.left,u.right)):E=g-2*(0!==n||0!==o?n+o:C(u.top,u.bottom))}await s({...e,availableWidth:L,availableHeight:E});const S=await l.getDimensions(c.floating);return p!==S.width||g!==S.height?{reset:{rects:!0}}:{}}}};var ft="undefined"!=typeof document?t.useLayoutEffect:function(){};function dt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if("function"==typeof t&&t.toString()===e.toString())return!0;let n,o,r;if(t&&e&&"object"==typeof t){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(o=n;0!==o--;)if(!dt(t[o],e[o]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(o=n;0!==o--;)if(!{}.hasOwnProperty.call(e,r[o]))return!1;for(o=n;0!==o--;){const n=r[o];if(!("_owner"===n&&t.$$typeof||dt(t[n],e[n])))return!1}return!0}return t!=t&&e!=e}function mt(t){return"undefined"==typeof window?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pt(t,e){const n=mt(t);return Math.round(e*n)/n}function gt(e){const n=t.useRef(e);return ft(()=>{n.current=e}),n}const ht=(t,e)=>({...ct(t),options:[t,e]}),yt=(t,e)=>({...st(t),options:[t,e]}),wt=(t,e)=>({...at(t),options:[t,e]}),vt=(t,e)=>({...ut(t),options:[t,e]}),xt={...e},bt=xt.useInsertionEffect||(t=>t());function Rt(e){const n=t.useRef(()=>{});return bt(()=>{n.current=e}),t.useCallback(function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return null==n.current?void 0:n.current(...e)},[])}var Tt="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;let Ct=!1,Et=0;const Lt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Et++,St=xt.useId||function(){const[e,n]=t.useState(()=>Ct?Lt():void 0);return Tt(()=>{null==e&&n(Lt())},[]),t.useEffect(()=>{Ct=!0},[]),e},At=t.createContext(null),Mt=t.createContext(null),Pt="data-floating-ui-focusable";function Dt(e){void 0===e&&(e={});const{nodeId:o}=e,r=function(e){const{open:n=!1,onOpenChange:o,elements:r}=e,i=St(),l=t.useRef({}),[c]=t.useState(()=>function(){const t=new Map;return{emit(e,n){var o;null==(o=t.get(e))||o.forEach(t=>t(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var o;t.set(e,(null==(o=t.get(e))?void 0:o.filter(t=>t!==n))||[])}}}()),s=null!=((null==(a=t.useContext(At))?void 0:a.id)||null);var a;const[u,f]=t.useState(r.reference),d=Rt((t,e,n)=>{l.current.openEvent=t?e:void 0,c.emit("openchange",{open:t,event:e,reason:n,nested:s}),null==o||o(t,e,n)}),m=t.useMemo(()=>({setPositionReference:f}),[]),p=t.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return t.useMemo(()=>({dataRef:l,open:n,onOpenChange:d,elements:p,events:c,floatingId:i,refs:m}),[n,d,p,c,i,m])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||r,l=i.elements,[c,a]=t.useState(null),[u,f]=t.useState(null),d=(null==l?void 0:l.domReference)||c,m=t.useRef(null),p=t.useContext(Mt);Tt(()=>{d&&(m.current=d)},[d]);const g=function(e){void 0===e&&(e={});const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l,elements:{reference:c,floating:s}={},transform:a=!0,whileElementsMounted:u,open:f}=e,[d,m]=t.useState({x:0,y:0,strategy:r,placement:o,middlewareData:{},isPositioned:!1}),[p,g]=t.useState(i);dt(p,i)||g(i);const[h,y]=t.useState(null),[w,v]=t.useState(null),x=t.useCallback(t=>{t!==C.current&&(C.current=t,y(t))},[]),b=t.useCallback(t=>{t!==E.current&&(E.current=t,v(t))},[]),R=c||h,T=s||w,C=t.useRef(null),E=t.useRef(null),L=t.useRef(d),S=null!=u,A=gt(u),M=gt(l),P=gt(f),D=t.useCallback(()=>{if(!C.current||!E.current)return;const t={placement:o,strategy:r,middleware:p};M.current&&(t.platform=M.current),((t,e,n)=>{const o=new Map,r={platform:ot,...n},i={...r.platform,_c:o};return(async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,c=i.filter(Boolean),s=await(null==l.isRTL?void 0:l.isRTL(e));let a=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:f}=z(a,o,s),d=o,m={},p=0;for(let g=0;g<c.length;g++){const{name:n,fn:i}=c[g],{x:h,y:y,data:w,reset:v}=await i({x:u,y:f,initialPlacement:o,placement:d,strategy:r,middlewareData:m,rects:a,platform:l,elements:{reference:t,floating:e}});u=null!=h?h:u,f=null!=y?y:f,m={...m,[n]:{...m[n],...w}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(a=!0===v.rects?await l.getElementRects({reference:t,floating:e,strategy:r}):v.rects),({x:u,y:f}=z(a,d,s))),g=-1)}return{x:u,y:f,placement:d,strategy:r,middlewareData:m}})(t,e,{...r,platform:i})})(C.current,E.current,t).then(t=>{const e={...t,isPositioned:!1!==P.current};k.current&&!dt(L.current,e)&&(L.current=e,n.flushSync(()=>{m(e)}))})},[p,o,r,M,P]);ft(()=>{!1===f&&L.current.isPositioned&&(L.current.isPositioned=!1,m(t=>({...t,isPositioned:!1})))},[f]);const k=t.useRef(!1);ft(()=>(k.current=!0,()=>{k.current=!1}),[]),ft(()=>{if(R&&(C.current=R),T&&(E.current=T),R&&T){if(A.current)return A.current(R,T,D);D()}},[R,T,D,A,S]);const H=t.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:b}),[x,b]),O=t.useMemo(()=>({reference:R,floating:T}),[R,T]),F=t.useMemo(()=>{const t={position:r,left:0,top:0};if(!O.floating)return t;const e=pt(O.floating,d.x),n=pt(O.floating,d.y);return a?{...t,transform:"translate("+e+"px, "+n+"px)",...mt(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:e,top:n}},[r,a,O.floating,d.x,d.y]);return t.useMemo(()=>({...d,update:D,refs:H,elements:O,floatingStyles:F}),[d,D,H,O,F])}({...e,elements:{...l,...u&&{reference:u}}}),h=t.useCallback(t=>{const e=s(t)?{getBoundingClientRect:()=>t.getBoundingClientRect(),contextElement:t}:t;f(e),g.refs.setReference(e)},[g.refs]),y=t.useCallback(t=>{(s(t)||null===t)&&(m.current=t,a(t)),(s(g.refs.reference.current)||null===g.refs.reference.current||null!==t&&!s(t))&&g.refs.setReference(t)},[g.refs]),w=t.useMemo(()=>({...g.refs,setReference:y,setPositionReference:h,domReference:m}),[g.refs,y,h]),v=t.useMemo(()=>({...g.elements,domReference:d}),[g.elements,d]),x=t.useMemo(()=>({...g,...i,refs:w,elements:v,nodeId:o}),[g,w,v,o,i]);return Tt(()=>{i.dataRef.current.floatingContext=x;const t=null==p?void 0:p.nodesRef.current.find(t=>t.id===o);t&&(t.context=x)}),t.useMemo(()=>({...g,context:x,refs:w,elements:v}),[g,w,v,x])}const kt="active",Ht="selected";function Ot(t,e,n){const o=new Map,r="item"===n;let i=t;if(r&&t){const{[kt]:e,[Ht]:n,...o}=t;i=o}return{..."floating"===n&&{tabIndex:-1,[Pt]:""},...i,...e.map(e=>{const o=e?e[n]:null;return"function"==typeof o?t?o(t):null:o}).concat(t).reduce((t,e)=>e?(Object.entries(e).forEach(e=>{let[n,i]=e;var l;r&&[kt,Ht].includes(n)||(0===n.indexOf("on")?(o.has(n)||o.set(n,[]),"function"==typeof i&&(null==(l=o.get(n))||l.push(i),t[n]=function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return null==(t=o.get(n))?void 0:t.map(t=>t(...r)).find(t=>void 0!==t)})):t[n]=i)}),t):t,{})}}function Ft(e){void 0===e&&(e=[]);const n=e.map(t=>null==t?void 0:t.reference),o=e.map(t=>null==t?void 0:t.floating),r=e.map(t=>null==t?void 0:t.item),i=t.useCallback(t=>Ot(t,e,"reference"),n),l=t.useCallback(t=>Ot(t,e,"floating"),o),c=t.useCallback(t=>Ot(t,e,"item"),r);return t.useMemo(()=>({getReferenceProps:i,getFloatingProps:l,getItemProps:c}),[i,l,c])}function Bt(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const Wt=t=>({name:"inner",options:t,async fn(e){const{listRef:o,overflowRef:r,onFallbackChange:i,offset:l=0,index:c=0,minItemsVisible:s=4,referenceOverflowThreshold:a=0,scrollRef:u,...f}=D(t,e),{rects:d,elements:{floating:m}}=e,p=o.current[c],g=(null==u?void 0:u.current)||m,h=m.clientTop||g.clientTop,y=0!==m.clientTop,w=0!==g.clientTop,v=m===g;if(!p)return{};const x={...e,...await ht(-p.offsetTop-m.clientTop-d.reference.height/2-p.offsetHeight/2-l).fn(e)},b=await lt(Bt(x,g.scrollHeight+h+m.clientTop),f),R=await lt(x,{...f,elementContext:"reference"}),L=C(0,b.top),S=x.y+L,A=(g.scrollHeight>g.clientHeight?t=>t:E)(C(0,g.scrollHeight+(y&&v||w?2*h:0)-L-C(0,b.bottom)));if(g.style.maxHeight=A+"px",g.scrollTop=L,i){const t=g.offsetHeight<p.offsetHeight*T(s,o.current.length)-1||R.top>=-a||R.bottom>=-a;n.flushSync(()=>i(t))}return r&&(r.current=await lt(Bt({...x,y:S},g.offsetHeight+h+m.clientTop),f)),{y:S}}});function It(e,o){const{open:r,elements:i}=e,{enabled:l=!0,overflowRef:c,scrollRef:s,onChange:a}=o,u=Rt(a),f=t.useRef(!1),d=t.useRef(null),m=t.useRef(null);t.useEffect(()=>{if(!l)return;function t(t){if(t.ctrlKey||!e||null==c.current)return;const o=t.deltaY,r=c.current.top>=-.5,i=c.current.bottom>=-.5,l=e.scrollHeight-e.clientHeight,s=o<0?-1:1,a=o<0?"max":"min";e.scrollHeight<=e.clientHeight||(!r&&o>0||!i&&o<0?(t.preventDefault(),n.flushSync(()=>{u(t=>t+Math[a](o,l*s))})):/firefox/i.test(function(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(t=>{let{brand:e,version:n}=t;return e+"/"+n}).join(" "):navigator.userAgent}())&&(e.scrollTop+=o))}const e=(null==s?void 0:s.current)||i.floating;return r&&e?(e.addEventListener("wheel",t),requestAnimationFrame(()=>{d.current=e.scrollTop,null!=c.current&&(m.current={...c.current})}),()=>{d.current=null,m.current=null,e.removeEventListener("wheel",t)}):void 0},[l,r,i.floating,c,s,u]);const p=t.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const t=(null==s?void 0:s.current)||i.floating;if(c.current&&t&&f.current){if(null!==d.current){const e=t.scrollTop-d.current;(c.current.bottom<-.5&&e<-1||c.current.top<-.5&&e>1)&&n.flushSync(()=>u(t=>t+e))}requestAnimationFrame(()=>{d.current=t.scrollTop})}}}),[i.floating,u,c,s]);return t.useMemo(()=>l?{floating:p}:{},[l,p])}export{vt as a,It as b,Ft as c,it as d,wt as f,Wt as i,ht as o,yt as s,Dt as u};
